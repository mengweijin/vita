var F=(g,h,n)=>new Promise((d,r)=>{var v=l=>{try{p(n.next(l))}catch(m){r(m)}},s=l=>{try{p(n.throw(l))}catch(m){r(m)}},p=l=>l.done?d(l.value):Promise.resolve(l.value).then(v,s);p((n=n.apply(g,h)).next())});import{b as A,_ as H}from"./_plugin-vue_export-helper-BGOXmsV2.js";/* empty css                   */import{u as M,f as $,P as Q,g as W,a as Y,b as G}from"./plus-form-x0srLAUX.js";import{w as D,r as b,c as J,b4 as K,B,p as x,V as X,bp as E,S as o,af as c,H as Z,ap as T,aq as V,I as y,k as t,eY as I,T as _,Q as L,as as z,L as S,fn as ee,gj as N,E as le,q as ae}from"./index-CKX0gG-m.js";const oe={class:"plus-drawer-form__footer"};var re=D({name:"PlusDrawerForm",__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},drawer:{default:()=>({})},size:{default:"540px"},form:{default:()=>({})},hasFooter:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},confirmLoading:{type:Boolean,default:!1},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(g,{expose:h,emit:n}){const d=g,r=n,{t:v}=M(),s=b(null),p=J(()=>{var e;return(e=s.value)==null?void 0:e.formInstance}),l=b(),m=b({}),w=b(!1),k=K(),U=$(k,W()),j=$(k,Y()),O=$(k,G());B(()=>d.visible,e=>{w.value=e},{immediate:!0}),B(()=>d.modelValue,e=>{m.value=e},{immediate:!0});const R=(e,i)=>{r("update:modelValue",e),r("change",e,i)},C=()=>F(this,null,function*(){var e,i,u;try{(yield(e=p.value)==null?void 0:e.validate())&&r("confirm",m.value)}catch(a){if(d.hasErrorTip){N.closeAll();const f=A(a)&&Object.values(a),q=f?(u=(i=f[0])==null?void 0:i[0])==null?void 0:u.message:void 0;N.warning(q||v("plus.form.errorTip"))}r("confirmError",a)}}),P=()=>{w.value=!1,r("update:visible",w.value),r("cancel")};return h({drawerInstance:l,formInstance:p}),(e,i)=>(x(),X(t(ee),z({ref_key:"drawerInstance",ref:l,modelValue:w.value,"onUpdate:modelValue":i[1]||(i[1]=u=>w.value=u),class:"plus-drawer-form",size:e.size||"540px",title:t(v)("plus.drawerForm.title"),"close-on-click-modal":!1,"close-on-press-escape":!1},e.$attrs,{onClose:P}),E({default:o(()=>[y(t(Q),z({ref_key:"formInstance",ref:s,modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=u=>m.value=u),"has-footer":!1},e.form,{onChange:R}),E({_:2},[e.$slots["form-footer"]?{name:"footer",fn:o(()=>[c(e.$slots,"form-footer")]),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:o(()=>[c(e.$slots,"form-group-header")]),key:"1"}:void 0,S(t(U),(u,a)=>({name:a,fn:o(f=>[c(e.$slots,a,T(V(f)))])})),S(t(j),(u,a)=>({name:a,fn:o(f=>[c(e.$slots,a,T(V(f)))])})),S(t(O),(u,a)=>({name:a,fn:o(f=>[c(e.$slots,a,T(V(f)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:o(()=>[c(e.$slots,"tooltip-icon")]),key:"2"}:void 0]),1040,["modelValue"])]),_:2},[e.$slots["drawer-header"]?{name:"header",fn:o(()=>[c(e.$slots,"drawer-header")]),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:o(()=>[Z("div",oe,[c(e.$slots,"drawer-footer",T(V({handleConfirm:C,handleCancel:P})),()=>[y(t(I),{onClick:P},{default:o(()=>[_(L(e.cancelText||t(v)("plus.drawerForm.cancelText")),1)]),_:1}),y(t(I),{type:"primary",loading:e.confirmLoading,onClick:C},{default:o(()=>[_(L(e.confirmText||t(v)("plus.drawerForm.confirmText")),1)]),_:1},8,["loading"])])])]),key:"1"}:void 0]),1040,["modelValue","size","title"]))}}),se=H(re,[["__file","index.vue"]]);const te=se,me=D({__name:"drawer",setup(g){const h=[{label:"名称",width:120,prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",width:120,prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"是否显示",width:100,prop:"switch",valueType:"switch"},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"要求",prop:"demand",valueType:"checkbox",options:[{label:"四六级",value:"0"},{label:"计算机二级证书",value:"1"},{label:"普通话证书",value:"2"}]},{label:"梦想",prop:"gift",valueType:"radio",options:[{label:"诗",value:"0"},{label:"远方",value:"1"},{label:"美食",value:"2"}]},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择开始时间",endPlaceholder:"请选择结束时间"}},{label:"说明",prop:"desc",valueType:"textarea",fieldProps:{maxlength:10,showWordLimit:!0,autosize:{minRows:2,maxRows:4}}}],n=b(!1),d=b({}),r=()=>{n.value=!0};return(v,s)=>{const p=le("el-button");return x(),ae("div",null,[y(p,{onClick:r},{default:o(()=>s[2]||(s[2]=[_("打开抽屉表单")])),_:1}),y(t(te),{visible:n.value,"onUpdate:visible":s[0]||(s[0]=l=>n.value=l),modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=l=>d.value=l),form:{columns:h}},null,8,["visible","modelValue","form"])])}}});export{me as _};
