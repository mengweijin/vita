var f=(s,o,l)=>new Promise((p,c)=>{var g=n=>{try{a(l.next(n))}catch(d){c(d)}},r=n=>{try{a(l.throw(n))}catch(d){c(d)}},a=n=>n.done?p(n.value):Promise.resolve(n.value).then(g,r);a((l=l.apply(s,o)).next())});import{e as M,r as u,o as G,I as _,ba as Y,bn as J,a1 as K,bt as C,aa as P,aj as H}from"./index-CKX0gG-m.js";import{_ as Q}from"./edit.vue_vue_type_script_setup_true_lang-BaABYOwC.js";import{_ as U}from"./detail.vue_vue_type_script_setup_true_lang-CACdeKJY.js";import{d as I,g as X,u as Z,c as w}from"./log-login-DCJFYKk2.js";import{R as N}from"./index-BkDFG21E.js";import"./detail-columns-DusdBfPV.js";import"./dict-CsgBd1eO.js";import"./vue-json-pretty-BU-JBrgw.js";function re(s){const o=M({}),l=u(),p=u([]),c=u(0),g=u(),r=u(!0),a=M({total:0,pageSize:10,currentPage:1,background:!0,pageSizes:[10,20,30,50]}),n=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"编号",prop:"id",minWidth:180,align:"left",hide:!0},{label:"登录账号",prop:"username",minWidth:80},{label:"登录类型",prop:"loginType",minWidth:80,cellRenderer:t=>_(N,{code:"vtl_login_type",size:"small",value:t.row.loginType},null)},{label:"IP",prop:"ip",minWidth:120},{label:"登录位置",prop:"ipLocation",minWidth:160},{label:"浏览器",prop:"browser",minWidth:100},{label:"设备平台",prop:"platform",minWidth:100},{label:"操作系统",prop:"os",minWidth:260},{label:"状态",prop:"success",minWidth:80,cellRenderer:t=>_(N,{code:"vtl_succeeded",size:"small",value:t.row.success},null)},{label:"失败信息",prop:"errorMsg",minWidth:160,hide:!0},{label:"操作者",minWidth:100,prop:"createByName",hide:!1},{label:"操作时间",minWidth:160,prop:"createTime",formatter:({createTime:t})=>Y(t).format("YYYY-MM-DD HH:mm:ss"),hide:!1},{label:"更新者",minWidth:100,prop:"updateByName",hide:!0},{label:"更新时间",minWidth:160,prop:"updateTime",formatter:({updateTime:t})=>Y(t).format("YYYY-MM-DD HH:mm:ss"),hide:!0},{label:"操作",fixed:"right",width:160,slot:"operation"}];function d(t){I(t.id).then(()=>{i()})}function j(){const t=s.value.getTableRef().getSelectionRows(),e=J(t,"id").join();I(e).then(()=>{s.value.getTableRef().clearSelection(),i()})}function k(t){c.value=t.length,s.value.setAdaptive()}function x(){c.value=0,s.value.getTableRef().clearSelection()}function B(t){a.pageSize=t,i()}function F(t){a.currentPage=t,i()}function i(){return f(this,null,function*(){r.value=!0,o.current=a.currentPage,o.size=a.pageSize;const t=yield X(K(o));p.value=t.records,a.total=t.total,a.pageSize=t.size,a.currentPage=t.current,setTimeout(()=>{r.value=!1},500)})}const $=t=>{t&&(t.resetFields(),i())};function O(t="新增",e){var h,b,v,S,L,W,D,y,R,T;C({title:`${t}`,props:{data:{id:(h=e==null?void 0:e.id)!=null?h:null,username:(b=e==null?void 0:e.username)!=null?b:"",loginType:(v=e==null?void 0:e.loginType)!=null?v:"",ip:(S=e==null?void 0:e.ip)!=null?S:"",ipLocation:(L=e==null?void 0:e.ipLocation)!=null?L:"",browser:(W=e==null?void 0:e.browser)!=null?W:"",platform:(D=e==null?void 0:e.platform)!=null?D:"",os:(y=e==null?void 0:e.os)!=null?y:"",success:(R=e==null?void 0:e.success)!=null?R:"",errorMsg:(T=e==null?void 0:e.errorMsg)!=null?T:""}},width:"40%",draggable:!0,fullscreen:P(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>H(Q,{ref:l,data:null}),beforeSure:(V,{options:q})=>{const m=q.props.data;function z(){V(),i()}l.value.getRef().validate(E=>{E&&(m.id?Z(m).then(()=>{z()}):w(m).then(()=>{z()}))})}})}function A(t="详情",e){C({title:`${t}`,props:{data:e},width:"80%",draggable:!0,fullscreen:P(),fullscreenIcon:!0,closeOnClickModal:!1,hideFooter:!0,contentRenderer:()=>H(U,{data:null})})}return G(()=>f(this,null,function*(){i()})),{form:o,curRow:g,loading:r,columns:n,dataList:p,selectedNum:c,pagination:a,onSearch:i,resetForm:$,openEditDialog:O,openDetailDialog:A,handleDelete:d,handleBatchDelete:j,handleSelectionCancel:x,handleSizeChange:B,handleCurrentChange:F,handleSelectionChange:k}}export{re as useLogLogin};
