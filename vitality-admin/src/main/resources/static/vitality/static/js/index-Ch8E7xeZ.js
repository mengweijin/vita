var be=Object.defineProperty,ve=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var M=(s,a,n)=>a in s?be(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n,E=(s,a)=>{for(var n in a||(a={}))ke.call(a,n)&&M(s,n,a[n]);if(L)for(var n of L(a))xe.call(a,n)&&M(s,n,a[n]);return s},X=(s,a)=>ve(s,he(a));var q=(s,a,n)=>new Promise((v,g)=>{var h=p=>{try{i(n.next(p))}catch(c){g(c)}},k=p=>{try{i(n.throw(p))}catch(c){g(c)}},i=p=>p.done?v(p.value):Promise.resolve(p.value).then(h,k);i((n=n.apply(s,a)).next())});import{useRole as ye}from"./hook-C0A9pfXd.js";import{P as we}from"./index-Dq8ZZizn.js";import{u as f}from"./hooks-dHEbcyFv.js";import{d as Ce,p as Ve,a as b,m as Re,aO as Se,y as $e,aP as De,gq as Ie,e as d,A as Pe,f as C,k as U,i as t,w as r,u as e,F as Be,l as Ue,b as ze,h as _,g as m,v as V,X as Q,B as W,t as G,aH as R,j as Te,_ as Fe}from"./index-BOgzzpjy.js";import{u as Ne}from"./dict-BGJzepeb.js";import{d as Oe}from"./delete-Ce0TSdK5.js";import{d as je}from"./edit-pen-Ci7W0xNM.js";import{d as Ae}from"./refresh-C_2cW1e5.js";import{d as He}from"./menu-DpbF6EVM.js";import{d as Le}from"./add-circle-line-DOJqVT3s.js";import{d as Me}from"./close-BLOQQEJ2.js";import{d as Ee}from"./check-CIQVCvCT.js";import"./form.vue_vue_type_script_setup_true_lang-CUagFHb4.js";import"./role-sMsAc2kK.js";import"./menu-m-RuHVSn.js";import"./sortable.esm-Br3T5NCo.js";import"./epTheme-CyfjZ5DK.js";import"./collapse-C6AcRu1r.js";const Xe={class:"main"},qe={key:0,class:"!min-w-[calc(100vw-60vw-268px)] w-full mt-2 px-2 pb-2 bg-bg_color ml-2 overflow-auto"},Qe={class:"flex justify-between w-full px-3 pt-5 pb-4"},We={class:"flex"},Ge={class:"font-bold truncate"},Je={class:"flex flex-wrap"},Ke=Ce({name:"SystemRole",__name:"index",setup(s){const a=Ve(()=>["w-[22px]","h-[22px]","flex","justify-center","items-center","outline-none","rounded-[4px]","cursor-pointer","transition-colors","hover:bg-[#0000000f]","dark:hover:bg-[#ffffff1f]","dark:hover:text-[#ffffffd9]"]),n=b(),v=b(),g=b(),h=b(),k=b(),{form:i,isShow:p,curRow:c,loading:z,columns:J,rowStyle:K,dataList:Y,treeData:Z,treeProps:ee,isLinkage:x,pagination:le,isExpandAll:S,isSelectAll:$,treeSearchValue:D,onSearch:T,resetForm:oe,openDialog:F,handleMenu:N,handleSave:te,handleDelete:ne,filterMethod:ae,transformI18n:re,onQueryChanged:se,handleSizeChange:ie,handleCurrentChange:de,handleSelectionChange:pe}=ye(n);return Re(()=>{Se(h,()=>q(this,null,function*(){yield $e(),De(60).then(()=>{k.value=parseFloat(Ie(g.value.getTableDoms().tableWrapper.style.height,"px"))})}))}),(Ye,l)=>{var A;const I=d("el-input"),y=d("el-form-item"),me=d("el-option"),ce=d("el-select"),u=d("el-button"),ue=d("el-form"),fe=d("el-popconfirm"),_e=d("pure-table"),O=d("IconifyIconOffline"),P=d("el-checkbox"),ge=d("el-tree-v2"),j=Pe("tippy");return C(),U("div",Xe,[t(ue,{ref_key:"formRef",ref:v,inline:!0,model:e(i),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:r(()=>[t(y,{label:"角色名称：",prop:"name"},{default:r(()=>[t(I,{modelValue:e(i).name,"onUpdate:modelValue":l[0]||(l[0]=o=>e(i).name=o),placeholder:"请输入角色名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(y,{label:"角色标识：",prop:"code"},{default:r(()=>[t(I,{modelValue:e(i).code,"onUpdate:modelValue":l[1]||(l[1]=o=>e(i).code=o),placeholder:"请输入角色标识",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(y,{label:"状态：",prop:"disabled"},{default:r(()=>[t(ce,{modelValue:e(i).disabled,"onUpdate:modelValue":l[2]||(l[2]=o=>e(i).disabled=o),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:r(()=>[(C(!0),U(Be,null,Ue(e(Ne)().getDicts("vtl_disabled"),(o,B)=>(C(),ze(me,{key:B,label:o.label,value:o.val},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:r(()=>[t(u,{type:"primary",icon:e(f)("ri:search-line"),loading:e(z),onClick:e(T)},{default:r(()=>l[9]||(l[9]=[_(" 搜索 ")])),_:1},8,["icon","loading","onClick"]),t(u,{icon:e(f)(e(Ae)),onClick:l[3]||(l[3]=o=>e(oe)(v.value))},{default:r(()=>l[10]||(l[10]=[_(" 重置 ")])),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),m("div",{ref_key:"contentRef",ref:h,class:V(["flex",e(Q)()?"flex-wrap":""])},[t(e(we),{class:V([e(p)&&!e(Q)()?"!w-[60vw]":"w-full"]),style:{transition:"width 220ms cubic-bezier(0.4, 0, 0.2, 1)"},title:"角色管理",columns:e(J),onRefresh:e(T)},{buttons:r(()=>[t(u,{type:"primary",icon:e(f)(e(Le)),onClick:l[4]||(l[4]=o=>e(F)())},{default:r(()=>l[11]||(l[11]=[_(" 新增角色 ")])),_:1},8,["icon"])]),default:r(({size:o,dynamicColumns:B})=>[t(_e,{ref_key:"tableRef",ref:g,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(z),size:o,adaptive:"","row-style":e(K),adaptiveConfig:{offsetBottom:108},data:e(Y),columns:B,pagination:X(E({},e(le)),{size:o}),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(pe),onPageSizeChange:e(ie),onPageCurrentChange:e(de)},{operation:r(({row:w})=>[t(u,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(f)(e(je)),onClick:H=>e(F)("修改",w)},{default:r(()=>l[12]||(l[12]=[_(" 修改 ")])),_:2},1032,["size","icon","onClick"]),t(fe,{width:500,title:`是否确认【删除】角色名称为【${w.name}】的数据？`,onConfirm:H=>e(ne)(w)},{reference:r(()=>[t(u,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(f)(e(Oe))},{default:r(()=>l[13]||(l[13]=[_(" 删除 ")])),_:2},1032,["size","icon"])]),_:2},1032,["title","onConfirm"]),t(u,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(f)(e(He)),onClick:H=>e(N)(w)},{default:r(()=>l[14]||(l[14]=[_(" 权限 ")])),_:2},1032,["size","icon","onClick"])]),_:2},1032,["loading","size","row-style","data","columns","pagination","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["class","columns","onRefresh"]),e(p)?(C(),U("div",qe,[m("div",Qe,[m("div",We,[m("span",{class:V(a.value)},[W(t(O,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Me),onClick:e(N)},null,8,["icon","onClick"]),[[j,{content:"关闭"}]])],2),m("span",{class:V([a.value,"ml-2"])},[W(t(O,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Ee),onClick:e(te)},null,8,["icon","onClick"]),[[j,{content:"保存菜单权限"}]])],2)]),m("p",Ge," 菜单权限 "+G(`${(A=e(c))!=null&&A.name?`（${e(c).name}）`:""}`),1)]),t(I,{modelValue:e(D),"onUpdate:modelValue":l[5]||(l[5]=o=>R(D)?D.value=o:null),placeholder:"请输入菜单进行搜索",class:"mb-1",clearable:"",onInput:e(se)},null,8,["modelValue","onInput"]),m("div",Je,[t(P,{modelValue:e(S),"onUpdate:modelValue":l[6]||(l[6]=o=>R(S)?S.value=o:null),label:"展开/折叠"},null,8,["modelValue"]),t(P,{modelValue:e($),"onUpdate:modelValue":l[7]||(l[7]=o=>R($)?$.value=o:null),label:"全选/全不选"},null,8,["modelValue"]),t(P,{modelValue:e(x),"onUpdate:modelValue":l[8]||(l[8]=o=>R(x)?x.value=o:null),label:"父子联动"},null,8,["modelValue"])]),t(ge,{ref_key:"treeRef",ref:n,"node-key":"id","show-checkbox":"",data:e(Z),props:e(ee),height:k.value,"check-strictly":!e(x),"filter-method":e(ae)},{default:r(({node:o})=>[m("span",null,G(e(re)(o.label)),1)]),_:1},8,["data","props","height","check-strictly","filter-method"])])):Te("",!0)],2)])}}}),vl=Fe(Ke,[["__scopeId","data-v-0575bc2f"]]);export{vl as default};
