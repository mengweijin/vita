var f=(s,o,l)=>new Promise((p,c)=>{var m=i=>{try{a(l.next(i))}catch(d){c(d)}},r=i=>{try{a(l.throw(i))}catch(d){c(d)}},a=i=>i.done?p(i.value):Promise.resolve(i.value).then(m,r);a((l=l.apply(s,o)).next())});import{r as M,a as u,m as E,i as _,aX as Y,ao as G,bo as J,af as C,X as P,L as H}from"./index-BOgzzpjy.js";import{_ as K}from"./edit.vue_vue_type_script_setup_true_lang-P_tAUZjx.js";import{_ as Q}from"./detail.vue_vue_type_script_setup_true_lang-BzKR4mTr.js";import{d as N,g as U,u as Z,c as w}from"./log-login-CGyfPX8R.js";import{R as k}from"./index-BRe61WGV.js";import"./detail-columns-B-34ibGr.js";import"./dict-BGJzepeb.js";import"./vue-json-pretty-D1eGRSs8.js";function re(s){const o=M({}),l=u(),p=u([]),c=u(0),m=u(),r=u(!0),a=M({total:0,pageSize:10,currentPage:1,background:!0,pageSizes:[10,20,30,50]}),i=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"编号",prop:"id",minWidth:180,align:"left",hide:!0},{label:"登录账号",prop:"username",minWidth:80},{label:"登录类型",prop:"loginType",minWidth:80,cellRenderer:t=>_(k,{code:"vtl_login_type",size:"small",value:t.row.loginType},null)},{label:"IP",prop:"ip",minWidth:120},{label:"登录位置",prop:"ipLocation",minWidth:160},{label:"浏览器",prop:"browser",minWidth:100},{label:"设备平台",prop:"platform",minWidth:100},{label:"操作系统",prop:"os",minWidth:260},{label:"状态",prop:"success",minWidth:80,cellRenderer:t=>_(k,{code:"vtl_succeeded",size:"small",value:t.row.success},null)},{label:"失败信息",prop:"errorMsg",minWidth:160,hide:!0},{label:"操作者",minWidth:100,prop:"createByName",hide:!1},{label:"操作时间",minWidth:160,prop:"createTime",formatter:({createTime:t})=>Y(t).format("YYYY-MM-DD HH:mm:ss"),hide:!1},{label:"更新者",minWidth:100,prop:"updateByName",hide:!0},{label:"更新时间",minWidth:160,prop:"updateTime",formatter:({updateTime:t})=>Y(t).format("YYYY-MM-DD HH:mm:ss"),hide:!0},{label:"操作",fixed:"right",width:160,slot:"operation"}];function d(t){N(t.id).then(()=>{n()})}function x(){const t=s.value.getTableRef().getSelectionRows(),e=G(t,"id").join();N(e).then(()=>{s.value.getTableRef().clearSelection(),n()})}function B(t){c.value=t.length,s.value.setAdaptive()}function F(){c.value=0,s.value.getTableRef().clearSelection()}function I(t){a.pageSize=t,n()}function $(t){a.currentPage=t,n()}function n(){return f(this,null,function*(){r.value=!0,o.current=a.currentPage,o.size=a.pageSize;const t=yield U(J(o));p.value=t.records,a.total=t.total,a.pageSize=t.size,a.currentPage=t.current,setTimeout(()=>{r.value=!1},500)})}const j=t=>{t&&(t.resetFields(),n())};function O(t="新增",e){var h,b,v,L,S,W,D,y,R,T;C({title:`${t}`,props:{data:{id:(h=e==null?void 0:e.id)!=null?h:null,username:(b=e==null?void 0:e.username)!=null?b:"",loginType:(v=e==null?void 0:e.loginType)!=null?v:"",ip:(L=e==null?void 0:e.ip)!=null?L:"",ipLocation:(S=e==null?void 0:e.ipLocation)!=null?S:"",browser:(W=e==null?void 0:e.browser)!=null?W:"",platform:(D=e==null?void 0:e.platform)!=null?D:"",os:(y=e==null?void 0:e.os)!=null?y:"",success:(R=e==null?void 0:e.success)!=null?R:"",errorMsg:(T=e==null?void 0:e.errorMsg)!=null?T:""}},width:"40%",draggable:!0,fullscreen:P(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>H(K,{ref:l,data:null}),beforeSure:(A,{options:V})=>{const g=V.props.data;function z(){A(),n()}l.value.getRef().validate(q=>{q&&(g.id?Z(g).then(()=>{z()}):w(g).then(()=>{z()}))})}})}function X(t="详情",e){C({title:`${t}`,props:{data:e},width:"80%",draggable:!0,fullscreen:P(),fullscreenIcon:!0,closeOnClickModal:!1,hideFooter:!0,contentRenderer:()=>H(Q,{data:null})})}return E(()=>f(this,null,function*(){n()})),{form:o,curRow:m,loading:r,columns:i,dataList:p,selectedNum:c,pagination:a,onSearch:n,resetForm:j,openEditDialog:O,openDetailDialog:X,handleDelete:d,handleBatchDelete:x,handleSelectionCancel:F,handleSizeChange:I,handleCurrentChange:$,handleSelectionChange:B}}export{re as useLogLogin};
