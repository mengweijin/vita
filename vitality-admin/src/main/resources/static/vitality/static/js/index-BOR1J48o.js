var Q=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var B=(s,n,a)=>n in s?Q(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,I=(s,n)=>{for(var a in n||(n={}))Z.call(n,a)&&B(s,a,n[a]);if(T)for(var a of T(n))ee.call(n,a)&&B(s,a,n[a]);return s},z=(s,n)=>W(s,X(n));import{useOss as oe}from"./hook-BgLRH9gw.js";import{d as A,a as k,go as te,gp as le,p as ne,e as d,f as V,b as ae,w as l,i as t,u as e,h as c,v as se,V as ie,m as re,A as de,k as D,B as ce,g as P,t as me,j as O,_ as pe}from"./index-BOgzzpjy.js";import{u as f}from"./hooks-dHEbcyFv.js";import{P as ue}from"./index-Dq8ZZizn.js";import{d as fe}from"./delete-Ce0TSdK5.js";import{d as _e}from"./refresh-C_2cW1e5.js";import{d as ge}from"./download-CFfJ8-ZW.js";import"./form.vue_vue_type_script_setup_true_lang-D66Qbqoj.js";import"./sortable.esm-Br3T5NCo.js";import"./epTheme-CyfjZ5DK.js";import"./collapse-C6AcRu1r.js";const he={width:1024,height:1024,body:'<path fill="currentColor" d="M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-578.304V704h-64V247.296L237.248 490.048L192 444.8L508.8 128l316.8 316.8l-45.312 45.248L544 253.696z"/>'},Ce={BASE_URL:"/vitality/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_API:"",VITE_CDN:"false",VITE_COMPRESSION:"none",VITE_HIDE_HOME:"false",VITE_PORT:"8848",VITE_PUBLIC_PATH:"/vitality/",VITE_ROUTER_HISTORY:"hash"},ye=A({__name:"index",props:{multiple:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!1},accept:{default:""},size:{default:"default"},flex:{type:Boolean,default:!1}},emits:["on-success"],setup(s,{emit:n}){const{VITE_BASE_API:a}=Ce,r=a+"/system/oss/upload",w=k({Authorization:te(le())}),m=s,C=n,y=ne(()=>m.flex?"flex":"");function _(g){C("on-success",g)}return(g,p)=>{const v=d("el-button"),S=d("el-upload");return V(),ae(S,{action:r,headers:w.value,multiple:"","show-file-list":m.showFileList,"on-success":_,class:se(y.value)},{default:l(()=>[t(v,{type:"primary",size:m.size,icon:e(f)(e(he))},{default:l(()=>p[0]||(p[0]=[c(" 上传文件 ")])),_:1},8,["size","icon"])]),_:1},8,["headers","show-file-list","class"])}}}),ve=ie(ye),be={class:"main"},xe={key:0,class:"bg-[var(--el-fill-color-light)] w-full h-[46px] mb-2 pl-4 flex items-center"},ke={class:"flex-auto"},Ve={style:{"font-size":"var(--el-font-size-base)"},class:"text-[rgba(42,46,54,0.5)] dark:text-[rgba(220,220,242,0.5)]"},we=A({name:"SystemOss",__name:"index",setup(s){const n=k(),a=k(),{form:r,curRow:w,loading:m,columns:C,dataList:y,selectedNum:_,pagination:g,onSearch:p,resetForm:v,openDialog:S,handleDelete:L,onBatchDel:$,onSelectionCancel:M,handleSizeChange:N,handleCurrentChange:U,handleSelectionChange:H,handleDownload:F}=oe(a);function j(Y){p()}return re(()=>{}),(Y,o)=>{const b=d("el-input"),h=d("el-form-item"),u=d("el-button"),q=d("el-form"),E=d("el-popconfirm"),G=d("pure-table"),J=de("motion-fade");return V(),D("div",be,[t(q,{ref_key:"formRef",ref:n,inline:!0,model:e(r),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:l(()=>[t(h,{label:"编号：",prop:"id"},{default:l(()=>[t(b,{modelValue:e(r).id,"onUpdate:modelValue":o[0]||(o[0]=i=>e(r).id=i),placeholder:"请输入编号",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(h,{label:"MD5：",prop:"md5"},{default:l(()=>[t(b,{modelValue:e(r).md5,"onUpdate:modelValue":o[1]||(o[1]=i=>e(r).md5=i),placeholder:"请输入MD5码",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(h,{label:"名称：",prop:"name"},{default:l(()=>[t(b,{modelValue:e(r).name,"onUpdate:modelValue":o[2]||(o[2]=i=>e(r).name=i),placeholder:"请输入名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(h,null,{default:l(()=>[t(u,{type:"primary",icon:e(f)("ri:search-line"),loading:e(m),onClick:e(p)},{default:l(()=>o[4]||(o[4]=[c(" 搜索 ")])),_:1},8,["icon","loading","onClick"]),t(u,{icon:e(f)(e(_e)),onClick:o[3]||(o[3]=i=>e(v)(n.value))},{default:l(()=>o[5]||(o[5]=[c(" 重置 ")])),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),t(e(ue),{title:"文件管理",columns:e(C),onRefresh:e(p)},{buttons:l(()=>[t(e(ve),{multiple:!0,flex:!0,"show-file-list":!1,onOnSuccess:j})]),default:l(({size:i,dynamicColumns:K})=>[e(_)>0?ce((V(),D("div",xe,[P("div",ke,[P("span",Ve," 已选 "+me(e(_))+" 项 ",1),t(u,{type:"primary",text:"",onClick:e(M)},{default:l(()=>o[6]||(o[6]=[c(" 取消选择 ")])),_:1},8,["onClick"])]),t(E,{width:500,title:"是否确认删除?",onConfirm:e($)},{reference:l(()=>[t(u,{type:"danger",text:"",class:"mr-1"},{default:l(()=>o[7]||(o[7]=[c(" 批量删除 ")])),_:1})]),_:1},8,["onConfirm"])])),[[J]]):O("",!0),t(G,{ref_key:"tableRef",ref:a,"row-key":"id","align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(m),size:i,adaptive:"",adaptiveConfig:{offsetBottom:108},data:e(y),columns:K,pagination:z(I({},e(g)),{size:i}),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(H),onPageSizeChange:e(N),onPageCurrentChange:e(U)},{operation:l(({row:x})=>[t(u,{class:"reset-margin",link:"",type:"primary",size:i,icon:e(f)(e(ge)),onClick:R=>e(F)(x)},{default:l(()=>o[8]||(o[8]=[c(" 下载 ")])),_:2},1032,["size","icon","onClick"]),O("",!0),t(E,{width:500,title:`是否确认【删除】名称为【${x.name}】的数据？`,onConfirm:R=>e(L)(x)},{reference:l(()=>[t(u,{class:"reset-margin",link:"",type:"primary",size:i,icon:e(f)(e(fe))},{default:l(()=>o[10]||(o[10]=[c(" 删除 ")])),_:2},1032,["size","icon"])]),_:2},1032,["title","onConfirm"])]),_:2},1032,["loading","size","data","columns","pagination","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["columns","onRefresh"])])}}}),$e=pe(we,[["__scopeId","data-v-5981d150"]]);export{$e as default};
