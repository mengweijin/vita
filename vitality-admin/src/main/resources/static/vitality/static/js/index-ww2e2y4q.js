var be=Object.defineProperty,ve=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var j=(s,a,n)=>a in s?be(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n,A=(s,a)=>{for(var n in a||(a={}))ke.call(a,n)&&j(s,n,a[n]);if(M)for(var n of M(a))xe.call(a,n)&&j(s,n,a[n]);return s},Q=(s,a)=>ve(s,he(a));var W=(s,a,n)=>new Promise((v,g)=>{var h=p=>{try{i(n.next(p))}catch(c){g(c)}},k=p=>{try{i(n.throw(p))}catch(c){g(c)}},i=p=>p.done?v(p.value):Promise.resolve(p.value).then(h,k);i((n=n.apply(s,a)).next())});import{useRole as ye}from"./hook-qs2PvhW_.js";import{P as Ce}from"./index-CKi_LGl7.js";import{u as f}from"./hooks-BeD412IW.js";import{w as we,c as Ve,r as b,o as Re,X as Se,W as $e,C as Ie,gE as De,E as d,ab as Pe,p as w,q as B,I as t,S as r,k as e,K as Ue,L as Be,V as Te,T as _,H as m,O as V,aa as X,F as q,Q as K,a9 as R,R as ze,_ as Ee}from"./index-CKX0gG-m.js";import{u as Fe}from"./dict-CsgBd1eO.js";import{d as Le}from"./delete-Ce0TSdK5.js";import{d as Ne}from"./edit-pen-Ci7W0xNM.js";import{d as Oe}from"./refresh-C_2cW1e5.js";import{d as He}from"./menu-DpbF6EVM.js";import{d as Me}from"./add-circle-line-DOJqVT3s.js";import{d as je}from"./close-BLOQQEJ2.js";import{d as Ae}from"./check-CIQVCvCT.js";import"./form.vue_vue_type_script_setup_true_lang-DvNYbUfe.js";import"./role-BC1946Za.js";import"./menu-DclwWwLJ.js";import"./sortable.esm-VSgMS8pS.js";import"./epTheme-CbgIfPLV.js";import"./collapse-DgdonavO.js";const Qe={class:"main"},We={key:0,class:"!min-w-[calc(100vw-60vw-268px)] w-full mt-2 px-2 pb-2 bg-bg_color ml-2 overflow-auto"},Xe={class:"flex justify-between w-full px-3 pt-5 pb-4"},qe={class:"flex"},Ke={class:"font-bold truncate"},Ge={class:"flex flex-wrap"},Je=we({name:"SystemRole",__name:"index",setup(s){const a=Ve(()=>["w-[22px]","h-[22px]","flex","justify-center","items-center","outline-none","rounded-[4px]","cursor-pointer","transition-colors","hover:bg-[#0000000f]","dark:hover:bg-[#ffffff1f]","dark:hover:text-[#ffffffd9]"]),n=b(),v=b(),g=b(),h=b(),k=b(),{form:i,isShow:p,curRow:c,loading:T,columns:G,rowStyle:J,dataList:Y,treeData:Z,treeProps:ee,isLinkage:x,pagination:oe,isExpandAll:S,isSelectAll:$,treeSearchValue:I,onSearch:z,resetForm:le,openDialog:E,handleMenu:F,handleSave:te,handleDelete:ne,filterMethod:ae,transformI18n:re,onQueryChanged:se,handleSizeChange:ie,handleCurrentChange:de,handleSelectionChange:pe}=ye(n);return Re(()=>{Se(h,()=>W(this,null,function*(){yield $e(),Ie(60).then(()=>{k.value=parseFloat(De(g.value.getTableDoms().tableWrapper.style.height,"px"))})}))}),(Ye,o)=>{var O;const D=d("el-input"),y=d("el-form-item"),me=d("el-option"),ce=d("el-select"),u=d("el-button"),ue=d("el-form"),fe=d("el-popconfirm"),_e=d("pure-table"),L=d("IconifyIconOffline"),P=d("el-checkbox"),ge=d("el-tree-v2"),N=Pe("tippy");return w(),B("div",Qe,[t(ue,{ref_key:"formRef",ref:v,inline:!0,model:e(i),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:r(()=>[t(y,{label:"角色名称：",prop:"name"},{default:r(()=>[t(D,{modelValue:e(i).name,"onUpdate:modelValue":o[0]||(o[0]=l=>e(i).name=l),placeholder:"请输入角色名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(y,{label:"角色标识：",prop:"code"},{default:r(()=>[t(D,{modelValue:e(i).code,"onUpdate:modelValue":o[1]||(o[1]=l=>e(i).code=l),placeholder:"请输入角色标识",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),t(y,{label:"状态：",prop:"disabled"},{default:r(()=>[t(ce,{modelValue:e(i).disabled,"onUpdate:modelValue":o[2]||(o[2]=l=>e(i).disabled=l),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:r(()=>[(w(!0),B(Ue,null,Be(e(Fe)().getDicts("vtl_disabled"),(l,U)=>(w(),Te(me,{key:U,label:l.label,value:l.val},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:r(()=>[t(u,{type:"primary",icon:e(f)("ri:search-line"),loading:e(T),onClick:e(z)},{default:r(()=>o[9]||(o[9]=[_(" 搜索 ")])),_:1},8,["icon","loading","onClick"]),t(u,{icon:e(f)(e(Oe)),onClick:o[3]||(o[3]=l=>e(le)(v.value))},{default:r(()=>o[10]||(o[10]=[_(" 重置 ")])),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),m("div",{ref_key:"contentRef",ref:h,class:V(["flex",e(X)()?"flex-wrap":""])},[t(e(Ce),{class:V([e(p)&&!e(X)()?"!w-[60vw]":"w-full"]),style:{transition:"width 220ms cubic-bezier(0.4, 0, 0.2, 1)"},title:"角色管理",columns:e(G),onRefresh:e(z)},{buttons:r(()=>[t(u,{type:"primary",icon:e(f)(e(Me)),onClick:o[4]||(o[4]=l=>e(E)())},{default:r(()=>o[11]||(o[11]=[_(" 新增角色 ")])),_:1},8,["icon"])]),default:r(({size:l,dynamicColumns:U})=>[t(_e,{ref_key:"tableRef",ref:g,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(T),size:l,adaptive:"","row-style":e(J),adaptiveConfig:{offsetBottom:108},data:e(Y),columns:U,pagination:Q(A({},e(oe)),{size:l}),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(pe),onPageSizeChange:e(ie),onPageCurrentChange:e(de)},{operation:r(({row:C})=>[t(u,{class:"reset-margin",link:"",type:"primary",size:l,icon:e(f)(e(Ne)),onClick:H=>e(E)("修改",C)},{default:r(()=>o[12]||(o[12]=[_(" 修改 ")])),_:2},1032,["size","icon","onClick"]),t(fe,{width:500,title:`是否确认【删除】角色名称为【${C.name}】的数据？`,onConfirm:H=>e(ne)(C)},{reference:r(()=>[t(u,{class:"reset-margin",link:"",type:"primary",size:l,icon:e(f)(e(Le))},{default:r(()=>o[13]||(o[13]=[_(" 删除 ")])),_:2},1032,["size","icon"])]),_:2},1032,["title","onConfirm"]),t(u,{class:"reset-margin",link:"",type:"primary",size:l,icon:e(f)(e(He)),onClick:H=>e(F)(C)},{default:r(()=>o[14]||(o[14]=[_(" 权限 ")])),_:2},1032,["size","icon","onClick"])]),_:2},1032,["loading","size","row-style","data","columns","pagination","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["class","columns","onRefresh"]),e(p)?(w(),B("div",We,[m("div",Xe,[m("div",qe,[m("span",{class:V(a.value)},[q(t(L,{class:"dark:text-white",width:"18px",height:"18px",icon:e(je),onClick:e(F)},null,8,["icon","onClick"]),[[N,{content:"关闭"}]])],2),m("span",{class:V([a.value,"ml-2"])},[q(t(L,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Ae),onClick:e(te)},null,8,["icon","onClick"]),[[N,{content:"保存菜单权限"}]])],2)]),m("p",Ke," 菜单权限 "+K(`${(O=e(c))!=null&&O.name?`（${e(c).name}）`:""}`),1)]),t(D,{modelValue:e(I),"onUpdate:modelValue":o[5]||(o[5]=l=>R(I)?I.value=l:null),placeholder:"请输入菜单进行搜索",class:"mb-1",clearable:"",onInput:e(se)},null,8,["modelValue","onInput"]),m("div",Ge,[t(P,{modelValue:e(S),"onUpdate:modelValue":o[6]||(o[6]=l=>R(S)?S.value=l:null),label:"展开/折叠"},null,8,["modelValue"]),t(P,{modelValue:e($),"onUpdate:modelValue":o[7]||(o[7]=l=>R($)?$.value=l:null),label:"全选/全不选"},null,8,["modelValue"]),t(P,{modelValue:e(x),"onUpdate:modelValue":o[8]||(o[8]=l=>R(x)?x.value=l:null),label:"父子联动"},null,8,["modelValue"])]),t(ge,{ref_key:"treeRef",ref:n,"node-key":"id","show-checkbox":"",data:e(Z),props:e(ee),height:k.value,"check-strictly":!e(x),"filter-method":e(ae)},{default:r(({node:l})=>[m("span",null,K(e(re)(l.label)),1)]),_:1},8,["data","props","height","check-strictly","filter-method"])])):ze("",!0)],2)])}}}),ho=Ee(Je,[["__scopeId","data-v-653ec2fa"]]);export{ho as default};
