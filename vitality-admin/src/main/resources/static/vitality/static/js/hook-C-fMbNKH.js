var f=(o,i,r)=>new Promise((g,c)=>{var p=n=>{try{t(r.next(n))}catch(u){c(u)}},s=n=>{try{t(r.throw(n))}catch(u){c(u)}},t=n=>n.done?g(n.value):Promise.resolve(n.value).then(p,s);t((r=r.apply(o,i)).next())});import{r as m,a as d,m as _,aX as M,ao as P,bo as L,af as S,X as b,L as v}from"./index-BOgzzpjy.js";import{_ as O}from"./edit.vue_vue_type_script_setup_true_lang-B2vemHCC.js";import{k as D,g as Y,_ as w}from"./detail.vue_vue_type_script_setup_true_lang-Bo2vOazl.js";import"./detail-columns-Dgbgbdui.js";import"./vue-json-pretty-D1eGRSs8.js";import"./hooks-dHEbcyFv.js";import"./delete-Ce0TSdK5.js";function A(o){const i=m({}),r=d(),g=d([]),c=d(0),p=d(),s=d(!0),t=m({total:0,pageSize:10,currentPage:1,background:!0,pageSizes:[10,20,30,50]}),n=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0,hide:!0},{label:"ID",prop:"id",minWidth:220,align:"left",hide:!1},{label:"会话类型",prop:"type",minWidth:140},{label:"登录类型",prop:"loginType",minWidth:80},{label:"账号",prop:"loginId",minWidth:100},{label:"Token",prop:"token",minWidth:180,hide:!0},{label:"登录时间",minWidth:160,prop:"createTime",formatter:({createTime:e})=>M(e).format("YYYY-MM-DD HH:mm:ss"),hide:!1},{label:"操作",fixed:"right",width:160,slot:"operation"}];function u(e){D(e.loginId).then(()=>{a()})}function k(){const e=o.value.getTableRef().getSelectionRows(),l=P(e,"loginId").join();D(l).then(()=>{o.value.getTableRef().clearSelection(),a()})}function z(e){c.value=e.length,o.value.setAdaptive()}function y(){c.value=0,o.value.getTableRef().clearSelection()}function C(e){t.pageSize=e,a()}function T(e){t.currentPage=e,a()}function a(){return f(this,null,function*(){s.value=!0,i.current=t.currentPage,i.size=t.pageSize;const e=yield Y(L(i));g.value=e.records,t.total=e.total,t.pageSize=e.size,t.currentPage=e.current,setTimeout(()=>{s.value=!1},500)})}const I=e=>{e&&(e.resetFields(),a())};function R(e="新增",l){var h;S({title:`${e}`,props:{data:{id:(h=l==null?void 0:l.id)!=null?h:null}},width:"40%",draggable:!0,fullscreen:b(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>v(O,{ref:r,data:null})})}function W(e="详情",l){S({title:`${e}`,props:{data:l},width:"80%",draggable:!0,fullscreen:b(),fullscreenIcon:!0,closeOnClickModal:!1,hideFooter:!0,contentRenderer:()=>v(w,{data:null})})}return _(()=>f(this,null,function*(){a()})),{form:i,curRow:p,loading:s,columns:n,dataList:g,selectedNum:c,pagination:t,onSearch:a,resetForm:I,openEditDialog:R,openDetailDialog:W,handleDelete:u,handleBatchDelete:k,handleSelectionCancel:y,handleSizeChange:C,handleCurrentChange:T,handleSelectionChange:z}}export{A as useLogLogin};
