import"./modulepreload-polyfill-B5Qt9EMX.js";import"./template-CAckB5T-.js";import{a as o,u as r}from"./admin-B4j-jj2x.js";function f(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}let c=layui.$,t=layui.layer,u=function(){c.ajaxSetup({loading:!0,layerIndex:-1,cache:!1,async:!0,contentType:"application/json;charset=UTF-8",processData:!1,beforeSend:function(e){if(this.loading&&(this.layerIndex=t.load(2,{shade:[.5,"#393D49"]})),this.dataType!=="html"){let s="/",a=this.url;a.startsWith(s)&&(a=a.slice(s.length)),this.url="/".concat(a)}this.data&&this.contentType.indexOf("application/json")!==-1&&(this.data=JSON.stringify(this.data)),e.setRequestHeader("Authorization","Bearer "+r.getToken())},error:function(e,s,a){var l;let i=(l=e==null?void 0:e.responseJSON)==null?void 0:l.msg;switch(console.error(e==null?void 0:e.responseJSON),e.status){case 400:t.msg(i,{icon:0});break;case 401:i="未登录或会话已过期！",t.alert(i,{icon:0,closeBtn:0,title:"会话过期提醒！"},function(n){t.close(n),sessionStorage.clear(),o.loadLogin()});break;case 403:t.open({icon:4,title:"无权限！",content:i,closeBtn:0,yes:function(n,p,d){t.close(n)}});break;case 404:t.msg(i,{icon:2,title:"找不到资源！"});break;case 408:t.msg("请求超时！",{icon:2});break;default:t.msg("服务器发生异常，请联系管理员！",{icon:2});break}},complete:function(e,s){t.close(this.layerIndex),!this.url.endsWith("/login")&&this.type.toUpperCase()!=="GET"&&e.status==200&&t.msg("操作成功！",{icon:1,time:800})}})};u();o.isLogin()?o.loadAdmin():o.loadLogin();export{f as __vite_legacy_guard};
