import"./modulepreload-polyfill-B5Qt9EMX.js";import{u as l}from"./template-DLbTA-Nv.js";import{a as s,u as c}from"./admin-BEPcWGP1.js";function m(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}let u=layui.$,t=layui.layer,p=function(){u.ajaxSetup({loading:!0,layerIndex:-1,cache:!1,async:!0,contentType:"application/json;charset=UTF-8",processData:!1,beforeSend:function(e){if(this.loading&&(this.layerIndex=t.load(2,{shade:[.5,"#393D49"]})),this.dataType!=="html"){let i="/",n=l.removePrefix(this.url,i),a=l.removeSuffix("/",i);this.url="".concat(a,"/").concat(n)}this.data&&this.contentType.indexOf("application/json")!==-1&&(this.data=JSON.stringify(this.data)),e.setRequestHeader("Authorization","Bearer "+c.getToken())},error:function(e,i,n){var r;let a=(r=e==null?void 0:e.responseJSON)==null?void 0:r.msg;switch(console.error(e==null?void 0:e.responseJSON),e.status){case 400:t.msg(a,{icon:0});break;case 401:a="未登录或会话已过期！",t.alert(a,{icon:0,closeBtn:0,title:"会话过期提醒！"},function(o){t.close(o),sessionStorage.clear(),s.loadLogin()});break;case 403:t.open({icon:4,title:"无权限！",content:a,closeBtn:0,yes:function(o,f,d){t.close(o)}});break;case 404:t.msg(a,{icon:2,title:"找不到资源！"});break;case 408:t.msg("请求超时！",{icon:2});break;default:t.msg("服务器发生异常，请联系管理员！",{icon:2});break}},complete:function(e,i){t.close(this.layerIndex),!this.url.endsWith("/login")&&this.type.toUpperCase()!=="GET"&&e.status==200&&t.msg("操作成功！",{icon:1,time:800})}})};p();s.isLogin()?s.loadAdmin():s.loadLogin();export{m as __vite_legacy_guard};
