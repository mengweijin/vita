<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<div th:fragment="header">
    <!--/** 添加/取消 layui-bg-black 即可切换跟侧边栏还是标题栏颜色保持一致。**/-->
    <div class="layui-logo layui-hide-xs">
        <img th:src="@{/image/logo.png}" style="cursor: pointer;"
             onclick="javascript:top.window.location.href='/'" />
    </div>

    <!-- 头部区域（可配合layui 已有的水平导航） -->
    <ul class="layui-nav layui-layout-left" lay-bar="disabled">
        <!-- 移动端显示 -->
        <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
            <i class="layui-icon layui-icon-spread-left"></i>
        </li>
        <li class="layui-nav-item" lay-unselect lay-header-event="shrink">
            <a href="javascript:;"><i id="shrinkSpreadIcon" class="layui-icon layui-icon-shrink-right"
                                      style="font-size: 20px;"></i></a>
        </li>
        <li class="layui-nav-item" lay-unselect lay-header-event="refresh">
            <a href="javascript:;" title="刷新"><i class="layui-icon layui-icon-refresh-3"
                                                   style="font-size: 20px;"></i></a>
        </li>
    </ul>

    <ul class="layui-nav layui-layout-right">
        <li class="layui-nav-item" lay-unselect lay-header-event="notice" style="width: 100px;">
            <a href="javascript:;">
                <i class="layui-icon layui-icon-notice" style="font-size: 20px;"></i>
                <span class="layui-badge">99+</span>
            </a>
        </li>
        <li class="layui-nav-item layui-hide layui-show-md-inline-block">
            <a href="javascript:;">
                <img src="/favicon.ico" class="layui-nav-img">Admin
            </a>
            <dl class="layui-nav-child">
                <dd><a href="">Your Profile</a></dd>
                <dd><a href="">Settings</a></dd>
                <dd><a href="">Sign out</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item" lay-unselect lay-header-event="menuRight">
            <a href="javascript:;"><i class="layui-icon layui-icon-more-vertical"></i></a>
        </li>
    </ul>

    <!--/** thymeleaf 中一定要使用 th:inline="javascript"，否则 let args = [[${变量名}]]; 从后端中取得的值是一个字符串，而不是一个 json 对象。**/-->
    <script th:inline="javascript">
        layui.use(['layer', 'util', 'jquery'], function () {
            let layer = layui.layer, util = layui.util, $ = layui.$;
            //头部事件
            util.event('lay-header-event', {
                shrink: function (othis) {
                    let $btn = $("#shrinkSpreadIcon");
                    if ($btn.hasClass('layui-icon-shrink-right')) {
                        $btn.removeClass('layui-icon-shrink-right').addClass('layui-icon-spread-left');
                        $(".layui-side").animate({ width: 'toggle' }); //toggle如果原来div是隐藏的就会把元素显示，如果原来是显示则隐藏
                        $(".layui-body").animate({ left: '0px' });
                        $(".layui-footer").animate({ left: '0px' });
                    } else if ($btn.hasClass('layui-icon-spread-left')) {
                        $btn.removeClass('layui-icon-spread-left').addClass('layui-icon-shrink-right');
                        $(".layui-side").animate({ width: 'toggle' });
                        $(".layui-body").animate({ left: '200px' });
                        $(".layui-footer").animate({ left: '200px' });
                    }
                },
                refresh: function (othis) {
                    let layid = location.hash.replace(/^#tab=/, '');
                    let $showIframe = $("[lay-filter='main_tab_filter'] div.layui-tab-content div.layui-show iframe");
                    if($showIframe.length == 1) {
                        $showIframe.attr("src", $showIframe.attr("src"))
                    }
                },
                notice: function () {
                    layer.open({
                        title: '查看通知',
                        type: 1,
                        content: '<div style="padding: 15px;">查看通知操作</div>',
                        area: ['350px', '80%'],
                        offset: 'rb', //右下角
                        anim: 5,
                        shadeClose: true
                    });
                },

                //左侧菜单事件
                menuLeft: function (othis) {
                    layer.msg('展开左侧菜单的操作', { icon: 0 });
                },
                menuRight: function () {
                    layer.open({
                        type: 1,
                        content: '<div style="padding: 15px;">处理右侧面板的操作</div>',
                        area: ['260px', '100%'],
                        offset: 'rt', //右上角
                        anim: 5,
                        shadeClose: true
                    });
                }
            });
        });
    </script>
</div>

</html>